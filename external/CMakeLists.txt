cmake_minimum_required(VERSION 3.12)

############ build libgit2
set (BUILD_SHARED_LIBS OFF CACHE BOOL " " FORCE)
set (USE_HTTPS OFF CACHE BOOL " " FORCE)
set (BUILD_TESTS OFF CACHE BOOL " " FORCE)

add_subdirectory(libgit2 EXCLUDE_FROM_ALL)
set (LIB_GIT2_INCLUDEDIR
            ${CMAKE_CURRENT_SOURCE_DIR}/libgit2/include PARENT_SCOPE)
set (LIB_GIT2_TARGET git2 PARENT_SCOPE)

############ build SDL3 for audio
set (BUILD_SHARED_LIBS OFF CACHE BOOL "" FORCE)
set (SDL_SHARED OFF CACHE BOOL "" FORCE)
set (SDL_STATIC ON  CACHE BOOL "" FORCE)

set (SDL_VIDEO        OFF CACHE BOOL "" FORCE)
set (SDL_RENDER       OFF CACHE BOOL "" FORCE)
set (SDL_OPENGL       OFF CACHE BOOL "" FORCE)
set (SDL_OPENGLES     OFF CACHE BOOL "" FORCE)
set (SDL_VULKAN       OFF CACHE BOOL "" FORCE)
set (SDL_DIRECTX      OFF CACHE BOOL "" FORCE)
set (SDL_METAL        OFF CACHE BOOL "" FORCE)
set (SDL_JOYSTICK     OFF CACHE BOOL "" FORCE)
set (SDL_HAPTIC       OFF CACHE BOOL "" FORCE)
set (SDL_SENSOR       OFF CACHE BOOL "" FORCE)
set (SDL_POWER        OFF CACHE BOOL "" FORCE)
set (SDL_TEST         OFF CACHE BOOL "" FORCE)

if(CMAKE_SYSTEM_NAME MATCHES "Windows")
    # TODO: Do whatever here for windows
else()
    set(SDL_ALSA          ON  CACHE BOOL "" FORCE)
    set(SDL_PULSEAUDIO    ON  CACHE BOOL "" FORCE)
endif()

set (SDL_AUDIO        ON  CACHE BOOL "" FORCE)
set (SDL_EVENTS       ON  CACHE BOOL "" FORCE)
set (SDL_THREADS      ON  CACHE BOOL "" FORCE)
set (SDL_TIMERS       ON  CACHE BOOL "" FORCE)
set (SDL_FILE         ON  CACHE BOOL "" FORCE)
set (SDL_UNIX_CONSOLE_BUILD ON CACHE BOOL "" FORCE)

add_subdirectory(SDL3)
set (LIB_SDL3_INCLUDEDIR
        ${CMAKE_CURRENT_SOURCE_DIR}/SDL3/include PARENT_SCOPE)
set (LIB_SDL3_TARGET SDL3::SDL3-static PARENT_SCOPE)
